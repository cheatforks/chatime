(function(j){var d=[/^(\d{1,4})$/,/^(\d{1,4})(-|\/)([0-1][0-2])$/,/^(\d{1,4})(-|\/)([0-1][0-2])\2([0-2][0-9]|[3][0-1])$/,/^(\d{1,4})(-|\/)([0-1][0-2])\2([0-2][0-9]|[3][0-1])\s(20|21|22|23|[0-1]\d)\:([0-5][0-9])$/,/^(\d{1,4})(-|\/)([0-1][0-2])\2([0-2][0-9]|[3][0-1])\s(20|21|22|23|[0-1]\d)\:([0-5][0-9])\:([0-5][0-9])$/,/^((20|21|22|23|[0-1]\d)\:[0-5][0-9])$/,/^((20|21|22|23|[0-1]\d)\:[0-5][0-9])(\:[0-5][0-9])$/,/^([0-1][0-2])(-|\/)([0-2][0-9]|[3][0-1])$/,/^([0-1][0-2])(-|\/)([0-2][0-9]|[3][0-1])\s(20|21|22|23|[0-1]\d)\:([0-5][0-9])$/,/^([0-1][0-2])(-|\/)([0-2][0-9]|[3][0-1])\s(20|21|22|23|[0-1]\d)\:([0-5][0-9])\:([0-5][0-9])$/,];var b=["YYYY","YYYY(/|-|\\s|)MM","YYYY(/|-|\\s|)MM(/|-|\\s|)DD","YYYY(/|-|\\s|)MM(/|-|\\s|)DD(\\s|)hh(:|\\s|)mm","YYYY(/|-|\\s|)MM(/|-|\\s|)DD(\\s|)hh(:|\\s|)mm(:|\\s|)ss","hh(:|s|)mm","hh(:|s|)mm(:|\\s|)ss","MM(/|-|\\s|)DD","MM(/|-|\\s|)DD(\\s|)hh(:|\\s|)mm","MM(/|-|\\s|)DD(\\s|)hh(:|\\s|)mm(:|s|)ss",];var h={dateSeparate:"-",timeSeparate:":",space:" "},y=h.dateSeparate,i=h.timeSeparate,k=h.space,z={id:1,now:"现在",lostHour:"小时前",lostMinute:"分钟前",lostSecond:"秒前",lostms:"毫秒前",today:"今天",yesterday:"昨天",theDayBefore:"前天",thisWeek:"星期",lastWeek:"上周",weekDes:["一","二","三","四","五","六","日"]},t={id:2,now:"now",lostHour:" hours ago",lostMinute:" minutes ago",lostSecond:" seconds ago",lostms:" milliseconds ago",today:"today",yesterday:"yesterday",theDayBefore:"the day before",thisWeek:"",lastWeek:"Last",weekDes:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekDesAbbr:["Mon.","Tues.","Wed.","Thur.","Fri.","Sat.","Sun."]},B=z;function m(C){return Object.prototype.toString.call(C)==="[object Array]"}function x(C){return Object.prototype.toString.call(C)==="[object Date]"}function n(C){return Object.prototype.toString.call(C)==="[object String]"}function p(C){return Object.prototype.toString.call(C)==="[object Number]"}function q(D){var E=/-|\//,C=D.match(E);if(C){return D.match(E).join("")}else{return false}}function u(E,H){y=q(E)||"-";var G=/[ymdhms]+/gi;var F=new v(H);for(var D=0,C=b.length;D<C;D++){var I=new RegExp("^"+b[D]+"$","i");if(I.test(E)){return(F[E.match(G).join("").toLowerCase()])()}}}var A=function(){return new A.prototype.init()};A.prototype={init:function(){return this}};A.prototype.init.prototype=A.prototype;var f={YYYY:function(C){return C.getFullYear().toString()},MM:function(C){var D=C.getMonth()+1;if(D<10){D="0"+D}return D},DD:function(E){var C=E.getDate();if(C<10){C="0"+C}return C},hh:function(D){var C=D.getHours();if(C<10){C="0"+C}return C},mm:function(D){var C=D.getMinutes();if(C<10){C="0"+C}return C},ss:function(D){var C=D.getMinutes();if(C<10){C="0"+C}return C}};function v(D){var C=f;this.yyyy=function(){return C.YYYY(D)};this.yyyymm=function(){return this.yyyy()+y+C.MM(D)};this.yyyymmdd=function(){return this.yyyymm()+y+C.DD(D)};this.mmdd=function(){return C.MM(D)+y+C.DD(D)};this.hhmm=function(){return C.hh(D)+i+C.mm(D)};this.hhmmss=function(){return C.hh(D)+i+C.mm(D)+i+C.ss(D)};this.yyyymmddhhmm=function(){return this.yyyymmdd()+k+this.hhmm()};this.yyyymmddhhmmss=function(){return this.yyyymmdd()+k+this.hhmmss()};this.mmddhhmm=function(){return this.mmdd()+k+this.hhmm()};this.mmddhhmmss=function(){return this.mmdd()+k+this.hhmmss()}}function l(D,C){return C.getTime()-D.getTime()}function g(G,C,E){var F=l(G,C),D={year:function(){return Math.floor(F/(12*30*24*3600*1000))},month:function(){return Math.floor(F/(30*24*3600*1000))},day:function(){return Math.floor(F/(24*3600*1000))},hour:function(){return Math.floor(F/(3600*1000))},minute:function(){return Math.floor(F/(60*1000))},second:function(){return Math.floor(F/(1000))},millisecond:function(){return F},};if(/^all$/.test(E)){return{year:D.year(),month:D.month(),day:D.day(),hour:D.hour(),minute:D.minute(),second:D.second(),millisecond:D.millisecond()}}else{if(/^(year|month|day|hour|minute|second|millisecond)$/.test(E)){return D[E]}}}var e=function(C){return B.weekDes[C.getDay()]};function a(E,D,F){var H=D;var G=h.space;var C=F===1?(B.yesterday+G+H.hhmm()):F===2?(B.theDayBefore+G+H.hhmm()):(F>=3&&F<7)?((B.id===1?B.thisWeek+e(E):e(E))+G+H.hhmm()):(F>=7&&F<14)?((B.id===1?B.lastWeek+e(E):B.lastWeek+G+e(E))+G+H.hhmm()):H.mmddhhmm();return C}function r(E){var C="",G={},F=new v(E),D=!!(l(E,new Date())>=0);if(D){G=g(E,new Date(),"all");C=G.year!==0?F.yyyymmddhhmm():G.month!==0?F.mmddhhmm():G.day!==0?a(E,F,G.day):G.hour!==0?G.hour+B.lostHour:G.minute!==0?G.minute+B.lostMinute:G.second!==0?G.second+B.lostSecond:G.millisecond!==0?G.millisecond+B.lostms:"now"}return C}function s(D){var F=false;for(var E=0,C=d.length;E<C;E++){if(d[E].test(D)){F=true}}return F}function c(K){var I=m(K),C=p(K),D=n(K),F=x(K);function J(L){if(x(L)){return L}else{if(n(L)){if(s(L)){return new Date(L)}}else{if(p(L)){if(/^\d{10}$/.test(L)){return new Date(L*1000)}else{if(/^\d{13}$/){return new Date(L)}}}}}}if(C||D||F){return J(K)}else{if(I){var H=[];for(var G=0,E=K.length;G<E;G++){H.push(J(K[G]))}return H}}}function w(K){if(K.config){o(K.config)
}var N=/^(s|ms)$/i,P=(K.time&&K.type==="chat"),G=(m(K.time)),L=(n(K.time)),H=(p(K.time)),D=(x(K.time)),M="错误的使用方式";if(P){if(G){var C=c(K.time);var J=[];for(var I=0,F=C.length;I<F;I++){J.push(r(C[I]))}B=z;return J||M}else{if(L){var E=c(K.time);return r(E)}}}else{if(K.time){if(!K.type){return u("yyyymmddhhmmss",new Date(K.time))||M}else{if(G){var O=[];for(var I=0,F=K.time.length;I<F;I++){O.push(u(K.type,new Date(K.time[I])))}return O||M}else{if(L||H){return u(K.type,new Date(K.time))||M}else{if(D){return u(K.type,K.time)||M}}}}}else{if(!K.time){if((!K.type)||(K.type&&!N.test(K.type))){return u(K.type||"yyyymmddhhmmss",new Date())||M}else{if(N.test(K.type)){if(K.type==="ms"){return new Date().getTime()||M}else{return parseInt(new Date().getTime()/1000)||M}}else{return u(K.type,new Date())}}}}}}function o(D){if(D.lang){if(/^(zh|en)$/.test(D.lang)){if(/^(zh)$/.test(D.lang)){B=z}else{B=t}if(D.langSet){for(var C in B){if(D.langSet[C]){B[C]=D.langSet[C]}}}}}}A.prototype.get=w;A.prototype.getDiff=g;A.prototype.newDate=c;j.chatime=A()})(window);